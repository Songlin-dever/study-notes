# 面试项目准备  

谷粒学苑

## 单点登录

single sign on （SSO）

1. session广播机制实现 （session复制）把session复制到其他模块 （二三十年前经常用

2. 使用cookie + redis实现

   1.在项目中任何一个模块登录后，把数据放到redis，cookie  1、

   ​		redis  在key中生成唯一随机值（用户ip、用户id），在value中存放用户数据

   ​		cookie  把redis里面生成的key放到cookie里面

   2.访问项目中的其他模块，发送请求时会带着cookie值，获取cookie的值后去redis查询

3. 使用token（令牌）实现 （token：按照一定规则（一般用JWT（JSON WEB TOKEN）官方规则）生成字符串，字符串里面可以包含用户信息（自包含令牌））

   JWT 生成的字符串包含三部分（1. jwt头信息，2. 有效载荷，包含主体信息 3. 签名哈希，防伪标志）

      1.在某一个模块登录后，按照一定规则生成包含用户信息的字符串，

   （1）可以将该字符串放入cookie返回客户端；

   （2）也可以 加密后放入地址栏中；

   2. 每次访问其他模块，每次访问都在地址中带着生成的字符串，根据字符串获取用户信息

#  微信扫码登录（OAuth2）

免去用户的登录和注册，OAuth2是针对特定问题的一种解决方案，OAuth2主要可以解决两个问题：

​	1.开放系统间授权（用户密码，开发者通用Key，颁发令牌）

​			对于颁发令牌，需要考虑如何管理令牌，颁发令牌，吊销令牌，需要统一的协议，因此就有了OAuth2协议

 	2. 分布式访问问题

OAuth2解决方案：令牌机制，按照一定规则生成字符串，字符串包含用户信息

# 递归删除菜单（DFS）

# 认证与授权实现思路

如果系统的模块众多，每个模块都需要进行授权与认证，我们选择基于token的形式进行授权与认证，用户根据用户名和密码认证成功，然后获取当前用户角色的一系列权限值，并以用户名为key，权限列表为value存入到redis缓存中，根据用户名相关信息生成token返回，浏览器再将token记录到cookie中，每次调用api接口都默认将token携带到header请求中，spring-security解析header请求头获取token信息，再解析token获取当前用户名相关信息，根据用户名就可以从redis中获取权限列表，这样spring-security就可以判断当前请求是否有权限访问